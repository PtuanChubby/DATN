<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Smart Wizard</title>
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
    />
    <script
      src="https://code.jquery.com/jquery-3.6.0.min.js"
      type="text/javascript"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/smartwizard@6/dist/js/jquery.smartWizard.min.js"
      type="text/javascript"
    ></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/smartwizard@6/dist/css/smart_wizard_dots.min.css"
    />
  </head>

  <body>
    <div class="container">
      <h2>Smart Wizard</h2>
      <div id="smartwizard">
        <ul class="nav nav-progress">
          <li class="nav-item">
            <a class="nav-link" href="#step-1">Bước 1</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#step-2">Bước 2</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#step-3">Bước 3</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#step-4">Bước 4</a>
          </li>
        </ul>

        <div class="tab-content">
          <div
            id="step-1"
            class="tab-pane"
            role="tabpanel"
            aria-labelledby="step-1"
          >
            <input
              type="text"
              id="inputStep1"
              placeholder="Nhập dữ liệu cho Bước 1"
            />
          </div>
          <div
            id="step-2"
            class="tab-pane"
            role="tabpanel"
            aria-labelledby="step-2"
          >
            <input
              type="text"
              id="inputStep2"
              placeholder="Nhập dữ liệu cho Bước 2"
            />
          </div>
          <div
            id="step-3"
            class="tab-pane"
            role="tabpanel"
            aria-labelledby="step-3"
          >
            <input
              type="text"
              id="inputStep3"
              placeholder="Nhập dữ liệu cho Bước 3"
            />
          </div>
          <div
            id="step-4"
            class="tab-pane"
            role="tabpanel"
            aria-labelledby="step-4"
          >
            <h2>Bước 4</h2>
            <div id="step4Data">
              Giá trị từ Bước 1: <span id="inputStep1Value"></span><br />
              Giá trị từ Bước 2: <span id="inputStep2Value"></span><br />
              Giá trị từ Bước 3: <span id="inputStep3Value"></span>
            </div>
          </div>
        </div>

        <div class="progress">
          <div
            class="progress-bar"
            role="progressbar"
            style="width: 0%"
            aria-valuenow="0"
            aria-valuemin="0"
            aria-valuemax="100"
          ></div>
        </div>
      </div>
    </div>
    <script>
      $(document).ready(function () {
        // Khởi tạo SmartWizard
        $("#smartwizard").smartWizard({
          selected: 0, // Chọn bước mặc định (0 là bước đầu tiên)
          theme: "dots", // Chọn giao diện cho SmartWizard
          transitionEffect: "fade", // Chọn hiệu ứng chuyển đổi giữa các bước
          showStepURLhash: false, // Tắt chức năng thay đổi URL khi chuyển bước
          toolbarSettings: {
            toolbarPosition: "bottom", // Vị trí hiển thị thanh công cụ ở dưới cùng
          },
          // Các tùy chọn khác...
          anchor: {
            // Chỉ định các bước bị vô hiệu hóa
            disabledSteps: [],
            // Chỉ định các bước bị vô hiệu hóa
            errorSteps: [],
            // Chỉ định các bước bị vô hiệu hóa
            warningSteps: [],
            // Chỉ định các bước bị ẩn
            hiddenSteps: [],
          },
          toolbar: {
            // Chỉ định vị trí thanh công cụ
            position: "bottom",
            // Hiển thị nút Next
            showNextButton: true,
            // Hiển thị nút Previous
            showPreviousButton: true,
            // Thêm HTML bổ sung vào thanh công cụ
            extraHtml: "",
          },
          lang: {
            // Ngôn ngữ của nút Next
            next: "Next",
            // Ngôn ngữ của nút Previous
            previous: "Previous",
          },
          // Sự kiện trước khi hiển thị bước
          onShowStep: function () {
            var stepNum = $("#smartwizard").smartWizard("getStepIndex");
            if (stepNum === 4) {
              // Nếu là bước 4, thay đổi nút "Next" thành nút "Submit"
              $(".sw-btn-next").addClass("subbmit-button").text("Submit");
            } else {
              // Nếu không phải bước 4, đảm bảo nút "Next" hiển thị
              $(".sw-btn-next").removeClass("subbmit-button").text("Next");
            }
          },
          // Sự kiện khi nhấp vào nút "Next" hoặc "Submit"
          onNext: function () {
            var stepNum = $("#smartwizard").smartWizard("getStepIndex");
            if (stepNum === 3) {
              // Nếu là bước 4, thực hiện xử lý khi nhấp vào nút "Submit"
              // Hiển thị thông báo hoàn thành hoặc đã lưu
              alert("Hoàn thành hoặc đã lưu!");
            }
            // Trả về true để cho phép chuyển đến bước tiếp theo
            return true;
          },
        });

        // Sự kiện khi chuyển đến bước trước đó
        var fields = [
          { id: "inputStep1", outputId: "inputStep1Value" },
          { id: "inputStep2", outputId: "inputStep2Value" },
          { id: "inputStep3", outputId: "inputStep3Value" },
          // Thêm các trường dữ liệu khác tại đây
        ];

        // Sự kiện khi chuyển đến bước trước đó
        $("#smartwizard").on(
          "leaveStep",
          function (e, anchorObject, stepNumber, stepDirection) {
            if (stepDirection === "backward") {
              for (var i = 0; i < fields.length; i++) {
                if (stepNumber === i + 1) {
                  var inputFieldValue = $("#" + fields[i].id).val();
                  $("#" + fields[i].outputId).text(inputFieldValue);
                  break;
                }
              }
              if (stepNumber >= 1) {
                updateStep4Data();
              }
            }
          }
        );

        // Sự kiện khi chuyển đến bước tiếp theo
        $("#smartwizard").on(
          "showStep",
          function (e, anchorObject, stepNumber, stepDirection) {
            if (stepDirection === "forward" && stepNumber === 2) {
              for (var i = 0; i < fields.length; i++) {
                var inputFieldValue = $("#" + fields[i].id).val();
                $("#" + fields[i].outputId).text(inputFieldValue);
              }
            }
            if (stepNumber >= 1) {
              updateStep4Data();
            }
          }
        );

        // Hàm cập nhật dữ liệu cho Bước 4
        function updateStep4Data() {
          for (var i = 0; i < fields.length; i++) {
            var inputFieldValue = $("#" + fields[i].id).val();
            $("#" + fields[i].outputId).text(inputFieldValue);
          }
        }
      });
    </script>
  </body>
</html>
